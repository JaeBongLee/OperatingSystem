##운영체제 7주차 
141068 이재봉

### 파일 시스템 

####파일 개념(File Concept)

`운영체제가 제공하는 컴퓨터 시스템을 편리하게 사용하기 위한 정보에 대한 일관된 논리적 관점`

`보조 저장장치에 기록된 관련 정보의 명명된 집합`

일반적으로 파일은 프로그램과 자료를 나타낸다. 

####파일 시스템(File System)

`운영체제에 포함된 파일 접근 및 관리 모듈`

`컴퓨터 시스템의 운영체제와 모든 사용자의 데이터와 프로그램의 온라인 저장과 접근을 위한 기법을 제공하는 시스템`

- 관련된 자료를 저장하는 파일들의 모음과 시스템 내의 모든 파일을 정리하고 그에 관한 정보를 제공하는 디렉터리 구조로 이루어짐 
- 파일 시스템은 디바이스 위에 존재 

### 저장 장치의 구조 
`하나의 운영체제에는 다양한 종류의 파일 시스템이 존재할 수 있다.`
#### 파티션(partition)
- 복잡한 관리를 위해 저장장치 공간을 세분화 
- 개별 파일 시스템의 크기 제한 
- 하나의 저장장치에 여러개의 파일 시스템 사용 가능 
- 별도의 스왑(swap)혹은 포맷되지 않은(raw)공간으로 활용 

#### 볼륨(volume)
- 파일 시스템을 포함하는 개체 	
	- 논리적인 가상 디스크 (virtual disk)
	- 저장 장치의 일부, 저장장치의 전체, 여러 개의 저장장치의 묶음 등으로 구성 
	
### 파일 속성과 파일 연산 
#### 파일 속성 
`파일의 특성을 설명하기 위한 부가정보로 디렉터리 구조 내부에 저장된다.`

파일 속성의 종류 

- Name: 파일 이름으로 사람이 읽을 수 있는 유일한 파일 정보
- Identifier: 파일 시스템에서 파일을 식별하는 고유한 식별자 (숫자로 된 태그)
- Type: 서로 다른 파일 종류를 지원하기 위한 정보
- Location: 저장장치 내에서 파일의 위치를 가리키는 포인터
- Size: 파일의 현재 크기 (bytes, words, blocks)
- Protection: 파일에 대한 접근 제어 정보 (읽기, 쓰기, 실행 등)
- Time, date, and user identification: 보호, 보안, 사용 감시에 활용

#####파일 종류 (File Types)
`파일이 담고 있는 정보의 종류에 따라 파일을 구별`

- 파일 이름의 확장자를 이용하여 구별 
- 각 파일에 수행 가능한 연산을 제한 
- 우리가 흔히 파일 확장자라고 부르는 것 

###파일 구조
`파일의 종류에 따른 내부 데이터 구성 방법`

파일 구조의 해석은 일반적으로 사용자 혹은 응용 프로그램이 수행한다. 

운영체제는 최소한의 파일 구조만을 인식하게 설계되기 때문인데 그 이유는 운영체제가 많은 파일 구조를 인식하려다 보면 운영체제의 크기가 커지고, 비효율적으로 자원이 사용되게 될 수 있기 때문이다. 

파일의 내부 저장구조는 블록 단위로 논리적 블록(파일)과 물리적 블록(저장장치)의 매핑을 수행한다. 이 때 블록 단위로 저장을 하다보면 생기는 쩌리 공간이 있는데 이런 부분을 __내부 단편__이라 한다. 이 내부 단편이 발생하는 상황을 __내부 단편화__라고 한다.  

###파일 연산 
- 운영체제의 시스템 호출(system call)로서 제공
-  파일 생성 (Create)
	- 파일 시스템 내에 공간 확보, 디렉터리에 파일 정보 추가
- 파일 삭제 (Delete)
	- 파일에 할당된 저장 공간을 반납 (release)
	‒ 일반적으로 저장 공간 자체를 삭제하는 연산을 하지는 않음
	- 디렉터리에서 파일 항목을 삭제
- 파일 쓰기 (Write)
	- 파일 이름과 기록될 데이터를 명시하여 시스템 호출	
	- 디렉터리를 검색하여 파일 위치 찾음
	- 쓰기 포인터(write pointer)를 유지하면서 데이터 기록
- 파일 읽기 (Read)
	- 파일 이름과 저장될 메모리 위치(주소)를 명시하여 시스템 호출
	- 디렉터리를 검색하여 파일 위치 찾음
	- 읽기 포인터(read pointer)를 유지하면서 데이터 읽음
- 파일 내의 연산 위치 설정 (Reposition)
	- 주어진 값으로 파일 위치 포인터 (file-position pointer)를 변경
	- 파일 탐색(seek)라는 이름으로 알려져 있음
- 파일 절단 (Truncate)
	- 파일의 속성을 유지한 채로 파일의 내용을 삭제
	- 파일 길이는 0으로 재설정
- 기타 연산
	- append, rename, get/set attribute
	
#### 파일 열기 
- open() 시스템 호출
	- 대부분의 파일 연산은 디렉터리에서 파일 정보 검색이 우선되어야 함
	- 디렉터리의 파일 정보를 시스템 내(메모리)에 복사하여 유지
		- 열린 파일들의 테이블 (open-file table)
		- 파일 테이블의 인덱스로 파일 정보를 참조
			- 유닉스/리눅스에서 파일 디스크립터 (file descriptor)
	- 파일 접근 모드 명시 (권한과 사용 용도)

<br>

- 파일에 대한 여러 프로세스의 동시 접근이 허용되는 경우
	- 2 단계 파일 테이블 유지
	- 프로세스 개별 파일 테이블
		- 현재 파일 포인터, 파일 접근 권한 및 accounting 정보 등
	- 시스템 전체 (system-wide) 파일 테이블
		- 저장장치에서의 파일 위치, 접근 날짜 및 파일 크기 등
		
<br>

- 파일 포인터 (File pointer)
	- 마지막 파일 읽기/쓰기가 끝난 위치
	- 각 프로세스 마다 별도로 유지 (디스크에 저장되는 속성이 아님)
- 파일 열림 개수 (File-open count)
	- 동일한 파일을 여러 프로세스가 반복해서 열 수 있음
	- 마지막 열린 파일이 닫혔을 때(close), 파일 테이블 항목을 삭제
- 디스크에서 파일의 위치 (Location)
	- 파일 연산 마다 파일 위치를 검색하지 않도록 열린 파일 테이블에 저장
- 접근 권한 (Access rights)
	- 각 프로세스가 해당 파일에 대해 가지는 접근 모드
	- 운영체제에 의해 허용 혹은 거부

	
